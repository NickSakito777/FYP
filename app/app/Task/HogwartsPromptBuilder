背景故事改编：
你是一名被凤凰社秘密招募的"霍格沃茨特工"，代号"夜鸦"。
你的任务是协助凤凰社成员（通过双面镜或其他魔法方式）阻止乌姆里奇和"黑雾"（食死徒残余势力）在霍格沃茨散布虚假信息。

任务阶段设计：

阶段1：新手任务 - 初入特工世界
剧情触发：
你收到一条来自双面镜的密语："夜鸦，你的第一个任务：潜入图书馆禁书区，找到一本被乌姆里奇查禁的防御魔法书。小心调查行动组的巡查。"

任务目标：

在图书馆禁书区（对应现实中特定区域）寻找被施了隐藏咒的书籍
使用显形咒（扫描特定标记）确认书籍真伪
在图书馆研习30分钟（模拟破解书中咒语）
阶段2：进阶任务 - 深入调查
剧情触发：
凤凰社情报："乌姆里奇计划在下次D.A.集会时实施突袭。我们需要你潜入她的办公室，获取计划细节。"

任务目标：

前往乌姆里奇办公室（现实中指定地点）
寻找并记录（拍照）重要文件
与其他D.A.成员（其他玩家）秘密交换情报
阶段3：终极任务 - 阻止阴谋
剧情触发：
"黑雾计划在O.W.L.s考试期间释放混淆咒！必须在考试开始前找到并破解他们的魔法装置。"

场景设计：

图书馆（禁书区任务）
有求必应屋（D.A.秘密集会点）
大礼堂（情报收集、观察乌姆里奇）
魔药教室（与斯内普互动）


更新版「凤凰社特工系统Prompt」
1. PromptBuilder.java（任务阶段设计）
方法名：buildDAOrderPrompt（构建D.A.秘密任务提示词）

任务阶段：

阶段1：新生任务 - 秘密入门（D.A.初步训练）

Objective: "夜鸦，凤凰社需要你在霍格沃茨进行初步情报作业。前往图书馆禁书区，寻找《抵御黑魔法进阶》这本被乌姆里奇禁止的书籍。注意：调查行动组可能会巡逻。"
Gameplay Adaptation（现实任务映射）：
现实目标：前往某教学楼指定区域（如“B区”），寻找一本封面是黑色的书籍
魔法任务包装：玩家需使用 “原形立现”（Revelio） 咒语（扫描二维码）来确认书籍未被篡改。（拍照）
时间限制：在图书馆停留 30分钟（模拟解读防御咒语的过程）。

阶段2：进阶任务 - 渗透调查（对抗乌姆里奇）

Objective: "乌姆里奇在策划对D.A.集会的突袭！你需要潜入她的办公室，复制她的监察计划表（位置：三楼拐角，粉红色门）。小心她的猫和告密学生！"
Gameplay Adaptation:
现实目标：前往某教学楼三楼（对应乌姆里奇办公室），拍摄一张特定告示栏（如学校公告板）的照片。
魔法任务包装：玩家需使用 “复制咒”（Geminio）（拍照+AI图像识别验证内容）。
隐藏机制：若玩家在过程中被“告密者”（其他玩家或NPC）发现，任务可能失败。

阶段3：终极任务 - 黑魔法对抗（最终行动）
Objective: "黑雾组织计划在O.W.L.s考试期间施放大规模混淆咒，干扰魔法部监考！你必须找到他们的施法装置（藏在大礼堂吊灯上），并在考试前摧毁它！"
Gameplay Adaptation:
现实目标：前往学校礼堂或主广场，寻找隐藏的“符文标记”（如特定符号海报）。
任务：将符文标记拍照，需要自己画一个解咒符文，将符文标记和解咒符文一起拍照。

2. LLMContextManager.java（联络员与世界观设定）
方法名：createPhoenixMessage（生成凤凰社通信）

关键设定:

联络员身份：代号 “守护者”（可以是 卢平、小天狼星或阿不福思），使用 双面镜、守护神咒或变形后的纸条（自动消失墨水） 传递信息。
情报网络模式：
守护神传信：当玩家完成关键任务时，AI生成的银白色守护神（如狼、狗、山羊形态）会“传递语音消息”。
密语系统：部分任务需破解如 “凤凰密文”（凯撒移位加密的拉丁文咒语）。
对玩家代号：始终称呼用户为 “夜鸦”，强化特工身份代入感。
3. ActivitySelection.java（交互逻辑与氛围强化）
关键方法：

startDAOrderMission：任务开始时，模拟乌姆里奇的校园广播（AI生成她的声音）：“所有学生注意，未经批准的集会将被严惩！”
checkMissionStatusAndReply：根据进度生成 动态风险提示，例如：
“费尔奇正在走廊巡逻，建议使用活点地图！”（若玩家移动速度过快，触发警告）
“告密生潘西·帕金森在附近，勿用显眼咒语！”（若玩家在社交区域停留过久）
失败处理：若任务暴露，触发 “关禁闭”剧情（乌姆里奇让玩家写“我不可以说谎”，需完成惩罚小游戏解除状态）。